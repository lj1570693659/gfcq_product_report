(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d7e53e7"],{"0bfb":function(t,e,r){"use strict";var o=r("cb7c");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"11e9":function(t,e,r){var o=r("52a7"),n=r("4630"),a=r("6821"),i=r("6a99"),s=r("69a8"),u=r("c69a"),l=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?l:function(t,e){if(t=a(t),e=i(e,!0),u)try{return l(t,e)}catch(r){}if(s(t,e))return n(!o.f.call(t,e),t[e])}},"31e9":function(t,e,r){"use strict";r("3793")},3793:function(t,e,r){},"3b2b":function(t,e,r){var o=r("7726"),n=r("5dbc"),a=r("86cc").f,i=r("9093").f,s=r("aae3"),u=r("0bfb"),l=o.RegExp,c=l,m=l.prototype,p=/a/g,f=/a/g,d=new l(p)!==p;if(r("9e1e")&&(!d||r("79e5")((function(){return f[r("2b4c")("match")]=!1,l(p)!=p||l(f)==f||"/a/i"!=l(p,"i")})))){l=function(t,e){var r=this instanceof l,o=s(t),a=void 0===e;return!r&&o&&t.constructor===l&&a?t:n(d?new c(o&&!a?t.source:t,e):c((o=t instanceof l)?t.source:t,o&&a?u.call(t):e),r?this:m,l)};for(var b=function(t){t in l||a(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},h=i(c),g=0;h.length>g;)b(h[g++]);m.constructor=l,l.prototype=m,r("2aba")(o,"RegExp",l)}r("7a56")("RegExp")},"5dbc":function(t,e,r){var o=r("d3f4"),n=r("8b97").set;t.exports=function(t,e,r){var a,i=e.constructor;return i!==r&&"function"==typeof i&&(a=i.prototype)!==r.prototype&&o(a)&&n&&n(t,a),t}},"621b":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"项目类型",prop:"tid"}},[r("el-select",{attrs:{"remote-method":t.getType,filterable:"","default-first-option":"",remote:"",placeholder:"请选择项目类型"},on:{change:t.handleChangeType},model:{value:t.form.tid,callback:function(e){t.$set(t.form,"tid",e)},expression:"form.tid"}},t._l(t.typeOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"项目简称",prop:"subName"}},[r("el-input",{model:{value:t.form.subName,callback:function(e){t.$set(t.form,"subName",e)},expression:"form.subName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"项目编号",prop:"proNumber"}},[r("el-input",{model:{value:t.form.proNumber,callback:function(e){t.$set(t.form,"proNumber",e)},expression:"form.proNumber"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"优先级评分",prop:"lcScore"}},[r("el-input",{model:{value:t.form.lcScore,callback:function(e){t.$set(t.form,"lcScore",e)},expression:"form.lcScore"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"预算修正",prop:"fixBudget"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"80px",label:"修正类型:"}},[r("el-select",{attrs:{"remote-method":t.getFixType,filterable:"","default-first-option":"",remote:"",placeholder:"请选择项目类型"},model:{value:t.form.fixType,callback:function(e){t.$set(t.form,"fixType",e)},expression:"form.fixType"}},t._l(t.fixTypeOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),r("el-col",{attrs:{span:10}},[r("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"修正金额:",prop:"fixBudget"}},[r("el-input",{attrs:{placeholder:"请输入修正金额（单位：元）"},model:{value:t.form.fixBudget,callback:function(e){t.$set(t.form,"fixBudget",e)},expression:"form.fixBudget"}})],1)],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"投资额度",prop:"invest"}},[r("el-input",{attrs:{placeholder:"请输入投资额度（单位：元）"},model:{value:t.form.invest,callback:function(e){t.$set(t.form,"invest",e)},expression:"form.invest"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"首年净利润",prop:"netProfit"}},[r("el-input",{attrs:{placeholder:"请输入首年净利润（单位：元）"},model:{value:t.form.netProfit,callback:function(e){t.$set(t.form,"netProfit",e)},expression:"form.netProfit"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"研发模式",prop:"modeId"}},[r("el-select",{attrs:{"remote-method":t.getMode,filterable:"","default-first-option":"",remote:"",placeholder:"请选择岗位信息"},model:{value:t.form.modeId,callback:function(e){t.$set(t.form,"modeId",e)},expression:"form.modeId"}},t._l(t.modeOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"项目经理",prop:"pmId"}},[r("el-select",{attrs:{"remote-method":t.getInstructor,filterable:"","default-first-option":"",remote:"",placeholder:"请选择项目经理"},model:{value:t.form.pmId,callback:function(e){t.$set(t.form,"pmId",e)},expression:"form.pmId"}},t._l(t.instructorOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"项目经理属性",prop:"attribute"}},[r("el-select",{attrs:{"remote-method":t.getAttribute,filterable:"","default-first-option":"",remote:"",placeholder:"请选择项目经理属性"},model:{value:t.form.attribute,callback:function(e){t.$set(t.form,"attribute",e)},expression:"form.attribute"}},t._l(t.attributeOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"项目总监",prop:"pmlId"}},[r("el-select",{attrs:{"remote-method":t.getInstructor,filterable:"","default-first-option":"",remote:"",placeholder:"请选择项目总监"},model:{value:t.form.pmlId,callback:function(e){t.$set(t.form,"pmlId",e)},expression:"form.pmlId"}},t._l(t.instructorOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"项目状态",prop:"status"}},[r("el-select",{attrs:{"remote-method":t.getStatus,filterable:"","default-first-option":"",remote:"",placeholder:"请选择项目状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"当前阶段",prop:"proTypeStageId"}},[r("el-select",{attrs:{"remote-method":t.getStage,filterable:"","default-first-option":"",remote:"",placeholder:"请选择当前阶段"},model:{value:t.form.proTypeStageId,callback:function(e){t.$set(t.form,"proTypeStageId",e)},expression:"form.proTypeStageId"}},t._l(t.stageOptions,(function(t,e){return r("el-option",{key:t+e,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),t._v(" "),r("el-button",{on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)},n=[],a=(r("ac6a"),r("7f7f"),r("3b2b"),r("b775"));function i(t){return Object(a["a"])({url:"/config/product/type/all",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/config/product/mode/all",method:"get",params:t})}function u(t){var e="";return e=void 0===t?"/config/product/stage/all/0":"/config/product/stage/all/"+t,Object(a["a"])({url:e,method:"get"})}var l=r("7adc"),c=r("b5ae"),m={id:0,name:"",subName:"",lcScore:0,tid:0,modeId:0,pmId:0,attribute:0,pmlId:0,status:1,proTypeStageId:0,fixType:0,fixBudget:0,invest:0,netProfit:0,remark:""},p={isEdit:!1,data:function(){var t=this,e=function(e,r,o){""===r||0===r||void 0===r?(t.$message({message:"项目类型为必选项",type:"error"}),o(new Error("请选择项目类型"))):o()},r=function(e,r,o){""===r||0===r||void 0===r?(t.$message({message:"项目名称为必传项",type:"error"}),o(new Error("请输入项目名称"))):o()},o=function(e,r,o){""===r||0===r||void 0===r?(t.$message({message:"项目简称为必传项",type:"error"}),o(new Error("请输入项目简称"))):o()},n=function(e,r,o){if(""===r||0===r||void 0===r)t.$message({message:"优先级评分为必传项",type:"error"}),o(new Error("请输入优先级评分"));else{var n=/^[0-9]*$/,a=new RegExp(n);a.test(r)||(t.$message({message:"请输入数字格式的优先级评分",type:"error"}),o(new Error("请输入数字格式的优先级评分"))),o()}},a=function(e,r,o){0!==r&&1!==r&&2!==r?(t.$message({message:"修正类型选择错误",type:"error"}),o(new Error("修正类型选择错误"))):o()},i=function(e,r,o){if(""===r||0===r||void 0===r)t.$message({message:"投资额度为必传项",type:"error"}),o(new Error("请输入投资额度"));else{var n=/^[0-9]*$/,a=new RegExp(n);a.test(r)||(t.$message({message:"请输入数字格式的投资额度",type:"error"}),o(new Error("请输入数字格式的投资额度"))),o()}},s=function(e,r,o){if(""===r||0===r||void 0===r)t.$message({message:"首年净利润为必传项",type:"error"}),o(new Error("请输入首年净利润"));else{var n=/^[0-9]*$/,a=new RegExp(n);a.test(r)||(t.$message({message:"请输入数字格式的首年净利润",type:"error"}),o(new Error("请输入数字格式的首年净利润"))),o()}},u=function(e,r,o){""===r||0===r||void 0===r?(t.$message({message:"研发模式为必传项",type:"error"}),o(new Error("请选择研发模式"))):o()},l=function(e,r,o){console.log("value---------",r),""===r||0===r||void 0===r?(t.$message({message:"当前阶段为必传项",type:"error"}),o(new Error("请选择项目当前所处阶段"))):o()},c=function(e,r,o){0!==r&&1!==r&&2!==r?(t.$message({message:"项目经理属性选择错误",type:"error"}),o(new Error("项目经理属性选择错误"))):o()},p=function(e,r,o){r<=0||r>10?(t.$message({message:"项目状态为必传项",type:"error"}),o(new Error("请选择项目状态"))):o()};return{form:m,typeOptions:[],fixTypeOptions:[],stageOptions:[],instructorOptions:[],modeOptions:[],attributeOptions:[],statusOptions:[],rules:{tid:[{validator:e}],name:[{validator:r}],subName:[{validator:o}],proNumber:[{validator:o}],lcScore:[{validator:n}],invest:[{validator:i}],fixType:[{validator:a,trigger:"blur"}],netProfit:[{validator:s}],modeId:[{validator:u}],status:[{validator:p}],attribute:[{validator:c}],proTypeStageId:[{validator:l}]}}},created:function(){if(this.getType(),this.getFixType(),this.getMode(),this.getInstructor(),this.getStage(),this.getStatus(),this.getAttribute(),console.log("this.$route.query.id----------------",this.$route.query.id),this.$route.query.id){var t=this.$route.query&&this.$route.query.id;this.fetchData(t)}this.tempRoute=Object.assign({},this.$route)},methods:{onSubmit:function(){var t=this;console.log("this.form---------",this.form),this.$refs.form.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0;var r={id:t.form.id,name:t.form.name,subName:t.form.subName,proNumber:t.form.proNumber,lcScore:t.form.lcScore,tid:t.form.tid,modeId:t.form.modeId,pmId:t.form.pmId,attribute:t.form.attribute,pmlId:t.form.pmlId,status:t.form.status,proTypeStageId:t.form.proTypeStageId,fixType:t.form.fixType,fixBudget:t.form.fixBudget,invest:t.form.invest,netProfit:t.form.netProfit,remark:t.form.remark};t.isEdit?Object(l["h"])(r).then((function(e){t.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),t.loading=!1,t.$router.push({path:"/product/index"})})):Object(l["a"])(r).then((function(e){t.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),t.loading=!1,t.$router.push({path:"/product/index"})}))}))},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},getType:function(t){var e=this;i(t).then((function(t){t.Data&&(e.typeOptions.push({id:0,name:"请选择"}),t.Data.forEach((function(t,r){e.typeOptions.push({id:t.Id,name:t.Name})})))}))},getFixType:function(t){this.fixTypeOptions.push({id:0,name:"请选择"}),this.fixTypeOptions.push({id:1,name:"增加"}),this.fixTypeOptions.push({id:2,name:"减少"})},getAttribute:function(){this.attributeOptions.push({id:0,name:"请选择"}),this.attributeOptions.push({id:1,name:"全职"}),this.attributeOptions.push({id:2,name:"兼职"})},getMode:function(t){var e=this;s(t).then((function(t){t.Data&&(e.modeOptions.push({id:0,name:"请选择"}),t.Data.forEach((function(t,r){e.modeOptions.push({id:t.Id,name:t.Name})})))}))},getInstructor:function(t){var e=this;Object(c["a"])(t).then((function(t){t.Data&&(e.instructorOptions.push({id:0,name:"请选择"}),t.Data.forEach((function(t,r){e.instructorOptions.push({id:t.Id,name:t.WorkNumber+" - "+t.UserName})})))}))},getStatus:function(t){this.statusOptions.push({id:0,name:"请选择"}),this.statusOptions.push({id:1,name:"未开始"}),this.statusOptions.push({id:2,name:"未立项"}),this.statusOptions.push({id:3,name:"进行中"}),this.statusOptions.push({id:4,name:"暂停"}),this.statusOptions.push({id:5,name:"已取消"}),this.statusOptions.push({id:6,name:"延迟"}),this.statusOptions.push({id:7,name:"异常"}),this.statusOptions.push({id:8,name:"已完成未验收"}),this.statusOptions.push({id:9,name:"客户已验收"}),this.statusOptions.push({id:10,name:"结项"})},getStage:function(t){var e=this;u(t).then((function(t){console.log("response------------",t),e.stageOptions=[],e.stageOptions.push({id:0,name:"请选择"}),t.forEach((function(t,r){e.stageOptions.push({id:t.productModeStage.id,name:t.productModeStage.name})}))}))},handleChangeType:function(t){this.getStage(t)},fetchData:function(t){var e=this;Object(l["d"])({id:t}).then((function(t){e.isEdit=!0,e.form=t})).catch((function(t){console.log(t)}))}}},f=p,d=(r("31e9"),r("0c7c")),b=Object(d["a"])(f,o,n,!1,null,"92750416",null);e["default"]=b.exports},"7adc":function(t,e,r){"use strict";r.d(e,"e",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"h",(function(){return u})),r.d(e,"g",(function(){return l})),r.d(e,"f",(function(){return c})),r.d(e,"i",(function(){return m})),r.d(e,"b",(function(){return p}));var o=r("b775");function n(t){return Object(o["a"])({url:"/plm/product/lists",method:"get",params:t})}function a(t){return Object(o["a"])({url:"/product/all",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/product/info",method:"get",params:t})}function s(t){return Object(o["a"])({url:"/product/create",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/product/modify",method:"put",data:t})}function l(t){return Object(o["a"])({url:"/product/member/import",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/product/member/lists",method:"get",params:t})}function m(t){return Object(o["a"])({url:"/product/member/modify",method:"put",data:t})}function p(t){return Object(o["a"])({url:"/product/member/delete",method:"delete",data:t})}},"8b97":function(t,e,r){var o=r("d3f4"),n=r("cb7c"),a=function(t,e){if(n(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,r){return a(t,r),e?t.__proto__=r:o(t,r),t}}({},!1):void 0),check:a}},9093:function(t,e,r){var o=r("ce10"),n=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,n)}},aae3:function(t,e,r){var o=r("d3f4"),n=r("2d95"),a=r("2b4c")("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},b5ae:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var o=r("b775");function n(t){return Object(o["a"])({url:"/system/organize/employee/all",method:"get",params:t})}}}]);